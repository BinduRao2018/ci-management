---

- publisher:
    name: edgex-jenkins-alerts
    publishers:
      - email:
          recipients: EdgeX-Jenkins-Alerts+int+444+7674852109629482390@lists.edgexfoundry.org
          notify-every-unstable-build: true
          send-to-individuals: true

- builder:
    name: edgex-provide-docker-cleanup
    builders:
      - shell: |
          #!/bin/bash
          set +e  # DO NOT cause build failure if docker rmi fails
          docker rmi -f $(docker images -a -q)
          exit 0

- builder:
    name: edgex-publish-docs
    builders:
      - config-file-provider:
          files:
            - file-id: 'edgex-docs-settings'
              variable: 'SETTINGS_FILE'
      - lf-infra-create-netrc:
          server-id: docs
      - inject:
          properties-content: |
            NEXUS_PATH={nexus-path}
            NEXUS_REPO={nexus-repo}
            DOC_DIRECTORY={doc-directory}
      - shell: !include-raw-escape:
          - global-jjb/shell/lftools-install.sh
          - shell/edgex-publish-docs.sh
